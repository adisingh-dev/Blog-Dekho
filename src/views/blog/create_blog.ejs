<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- styles -->
<link rel="stylesheet" href="/css/create_blog.css">
<link rel="stylesheet" href="/css/global.css">
<link rel="stylesheet" href="/css/loader-small.css">

<body>
    <div id="overlay"></div>
    <%- include('../components/navbar.ejs') %>    
    <script type="application/javascript" src="/tinymce/tinymce.min.js"></script>
    <script type="application/javascript" src="/js/tinymce_config.js"></script>
    <%
        let title = body = excerpt = imgUrl = "";
        let action = "/blogs";
        if(Object.keys(responseJson.blog).length > 0) {
            title = (responseJson.blog.title)? responseJson.blog.title: "";
            body = (responseJson.blog.body)? responseJson.blog.body: "";
            excerpt = (responseJson.blog.excerpt)? responseJson.blog.excerpt: "";
            imgUrl = (responseJson.blog.img_url)? responseJson.blog.img_url: "";
            action = `/blogs/${responseJson.blog.id}`;
        }
    %>
    <div class="create-blog-wrapper">
        <form action="<%= action %>" id="create-blog">
            <div class="upper">
                <div class="first-half">
                    <div class="title-wrapper">
                        <label for="header" id="title-label">Title:</label>
                        <input class='input-field' name="title" id="header" placeholder="Enter Blog Title" value="<%= title %>">
                    </div>
                    <div class="excerpt-wrapper">
                        <label for="excerpt" id="excerpt-label">Excerpt:</label>
                        <textarea class='input-field' name="excerpt" id="excerpt" placeholder="Enter Excerpt"><%= excerpt %></textarea>
                        <!-- upcoming feature -->
                        <!-- <div id="excerpt-mode">
                            <button id="custom-excerpt">Custom</button>
                            <button id="automatic-excerpt">Auto</button>
                        </div> -->
                    </div>
                    <div class="image-wrapper">
                        <input type="hidden" name="hiddenPreview" id="hidden-input" value='<%= imgUrl %>' hidden>
                        <input type="file" name="featured" id="image-input" hidden>
                        <label for="image-input" id="image-input-label">Select File</label>
                        <img id="image-preview" name="preview" src="<%= imgUrl %>"/>
                    </div>
                    <div id="lower">
                        <span id="verdict"></span>
                        <div class="submit-reset">
                            <button type="reset" id="post-reset">Reset</button>
                            <button type="submit" id="post-blog">Submit</button>
                        </div>
                    </div>
                </div>
                <div class="second-half">
                    <div id="loader-small">
                        <div class="loader-small-blur"></div>
                        <div class="loader-small-container">
                            <img id="loader-small-img" src="/assets/img/loader-small.svg" alt="">
                        </div>
                    </div>
                    <textarea class='input-field' name="body" id="description" placeholder="Enter Body" blogbody="<%= body %>"></textarea>
                </div>
            </div> 
        </form>
    </div>

</body>
</html>
    
<script src="/js/marked.min.js"></script>
<script src="/js/axios.min.js" type="text/javascript"></script>
<script type="text/javascript">
</script>
<script src="/js/create_blog.js" type="text/javascript"></script>
