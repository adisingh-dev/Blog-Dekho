<!-- styles -->
<link rel="stylesheet" href="/css/global.css">
<link rel="stylesheet" href="/css/read_blog.css">

<div id="overlay"></div>
<%- include('../components/navbar.ejs') %>
<%- include('../components/generic_error_popup.ejs') %>

<div class="blog-wrapper">
    <div class="blog-content">
        <div class="created-info-container">
            <div class="created-info-img">
                <img src="<%= responseJson.creatorinfo.profilepic %>" alt="" class="pfp">
            </div>
            <div class="created-info">
                <div class="lefttetext">
                    <p class="created-by">
                        By <%=responseJson.creatorinfo.username%> . <%=responseJson.creatorinfo.dateOfCreation%>
                    </p>
                    <p class='subscribercount'><%= responseJson.creatorinfo.subscribers %>  Subscribers</p>
                </div>
                <div class="righttext">
                    <div class="likes">
                        <div class="likesicon-container">
                            <img src="<%= responseJson.creatorinfo.liked? "/assets/img/like-filled.svg": "/assets/img/like-outline.svg" %>" class="likesicon" alt="">
                        </div>
                        <div class="likescount-container">
                            <p class="likescount">
                                <%= responseJson.creatorinfo.likes %>
                            </p>
                        </div>
                    </div>
                    <% if(responseJson.creatorinfo.id == responseJson.userinfo.userid) { %>
                        <button class="manage-post">Manage</button>

                    <% } else { %>
                        <span class="subscription" id=<%= responseJson.creatorinfo.subscribed? 'following': 'follow' %>>
                            <%= responseJson.creatorinfo.subscribed? 'Following': 'Follow' %>
                        </span>
                    <% } %>
                </div>
            </div>
        </div>
        <img src="<%= responseJson.blog.imgUrl %>" alt="" class="blog-graphic">
        <h1 class="blog-title"><%- responseJson.blog.title %></h1>
        <div class="blog-body">
            <%- responseJson.blog.body %>
        </div>
    </div>
</div>

<script src="/js/axios.min.js"></script>
<script type="text/javascript">
    const creatorId = "<%= responseJson.creatorinfo.id %>";
    const blogId = "<%= responseJson.blog.id %>";
</script>
<script src="/js/read_blog.js" type="text/javascript"></script>
